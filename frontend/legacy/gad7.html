<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GAD-7 Anxiety Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: Inter, sans-serif; background:#f5f7fb; margin:0 }
    .test-container { max-width:900px; margin:40px auto; padding:40px }
    .test-header { text-align:center; margin-bottom:40px }
    .test-header h2 {
      font-size:2.3rem;font-weight:800;
      background:linear-gradient(135deg,#667eea,#764ba2);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent
    }
    .test-form { background:#fff;padding:40px;border-radius:20px;box-shadow:0 15px 40px rgba(0,0,0,.1) }
    .question-item { margin-bottom:30px;border-bottom:1px solid #eee;padding-bottom:20px }
    .question-text { font-weight:600;margin-bottom:12px }
    .radio-group { display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px }
    .radio-option {
      display:flex;gap:10px;align-items:center;
      padding:14px;border:2px solid #e5e7eb;border-radius:12px;
      cursor:pointer;transition:.25s;background:#fff
    }
    .radio-option:hover { border-color:#6366f1;background:#eef2ff }
    .radio-option.selected {
      border-color:#6366f1;
      background:linear-gradient(135deg,#eef2ff,#e0e7ff);
      box-shadow:0 8px 20px rgba(99,102,241,.25);
      font-weight:600
    }
    .submit-section { text-align:center;margin-top:40px }
    .submit-btn {
      padding:14px 50px;font-size:1.1rem;border-radius:12px;
      border:none;cursor:pointer;color:#fff;
      background:linear-gradient(135deg,#667eea,#764ba2)
    }
    .submit-btn:disabled { opacity:.7;cursor:not-allowed }
  </style>
</head>

<body>

<div class="test-container">
  <div class="test-header">
    <h2>GAD-7 Anxiety Screening</h2>
    <p>Over the last 2 weeks, how often have you been bothered by the following problems?</p>
  </div>

  <form id="gad7Form" class="test-form">
    <!-- QUESTIONS INSERTED BY JS -->
  </form>
</div>

<script>
const questions = [
  "Feeling nervous, anxious, or on edge",
  "Not being able to stop or control worrying",
  "Worrying too much about different things",
  "Trouble relaxing",
  "Being so restless that it is hard to sit still",
  "Becoming easily annoyed or irritable",
  "Feeling afraid as if something awful might happen"
];

const options = [
  "Not at all",
  "Several days",
  "More than half the days",
  "Nearly every day"
];

const form = document.getElementById("gad7Form");

// Render questions (SERIAL FIXED)
questions.forEach((text, index) => {
  form.insertAdjacentHTML("beforeend", `
    <div class="question-item">
      <div class="question-text">${index + 1}. ${text}</div>
      <div class="radio-group">
        ${options.map((label, value) => `
          <label class="radio-option">
            <input type="radio" name="q${index + 1}" value="${value}">
            ${label}
          </label>
        `).join("")}
      </div>
    </div>
  `);
});

// Submit button
form.insertAdjacentHTML("beforeend", `
  <div class="submit-section">
    <button type="submit" class="submit-btn">Submit GAD-7</button>
  </div>
`);

// Visual select
document.addEventListener("change", e => {
  if (e.target.type === "radio") {
    document
      .querySelectorAll(`input[name="${e.target.name}"]`)
      .forEach(r => r.parentElement.classList.remove("selected"));
    e.target.parentElement.classList.add("selected");
  }
});

// Submit logic
form.addEventListener("submit", e => {
  e.preventDefault();

  const btn = document.querySelector(".submit-btn");
  btn.disabled = true;
  btn.textContent = "Submitting...";

  let score = 0;
  for (let i = 1; i <= 7; i++) {
    const ans = document.querySelector(`input[name="q${i}"]:checked`);
    if (!ans) {
      alert("Please answer all questions");
      btn.disabled = false;
      btn.textContent = "Submit GAD-7";
      return;
    }
    score += parseInt(ans.value);
  }

  const level =
    score <= 4 ? "Minimal Anxiety" :
    score <= 9 ? "Mild Anxiety" :
    score <= 14 ? "Moderate Anxiety" :
    "Severe Anxiety";

  document.querySelector(".test-container").innerHTML = `
    <div style="text-align:center;padding:40px">
      <h2>GAD-7 Result</h2>
      <div style="font-size:48px;font-weight:800">${score}</div>
      <p style="font-size:20px">${level}</p>
      <p style="color:#666">Redirecting to dashboardâ€¦</p>
    </div>
  `;

  setTimeout(() => {
    window.location.href = "dashboard.html";
  }, 2500);
});
</script>

</body>
</html>
